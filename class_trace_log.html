<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Phosphor: TraceLog Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Phosphor
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('class_trace_log.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pro-static-attribs">Static Protected Attributes</a> &#124;
<a href="class_trace_log-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">TraceLog Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="trace__log_8h_source.html">trace_log.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_trace_log_1_1_chunk_tenant.html">ChunkTenant</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1ad9e9ea9b3b14f6883e004e8b74ced8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_trace_log.html#a1ad9e9ea9b3b14f6883e004e8b74ced8">TraceLog</a> ()</td></tr>
<tr class="separator:a1ad9e9ea9b3b14f6883e004e8b74ced8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d909b79b5029ebb74ec036311d9ca57"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_trace_log.html#a4d909b79b5029ebb74ec036311d9ca57">start</a> (const <a class="el" href="class_trace_config.html">TraceConfig</a> &amp;_trace_config)</td></tr>
<tr class="separator:a4d909b79b5029ebb74ec036311d9ca57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2f61d1156cba274ba9c2f692a5d4487"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_trace_log.html#ae2f61d1156cba274ba9c2f692a5d4487">stop</a> ()</td></tr>
<tr class="separator:ae2f61d1156cba274ba9c2f692a5d4487"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c1721c7148e479b4595b5a93ad9f930"><td class="memTemplParams" colspan="2">template&lt;typename T , typename U &gt; </td></tr>
<tr class="memitem:a9c1721c7148e479b4595b5a93ad9f930"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="class_trace_log.html#a9c1721c7148e479b4595b5a93ad9f930">logEvent</a> (const char *category, const char *name, <a class="el" href="class_trace_event.html#a28a4149a797aa3e782180b8a400d3a5a">TraceEvent::Type</a> type, size_t id, T argA, U argB)</td></tr>
<tr class="separator:a9c1721c7148e479b4595b5a93ad9f930"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98d084e49b5d6285368343eeb63bdf1f"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="class_trace_buffer.html">TraceBuffer</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_trace_log.html#a98d084e49b5d6285368343eeb63bdf1f">getBuffer</a> ()</td></tr>
<tr class="separator:a98d084e49b5d6285368343eeb63bdf1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8d3aaf4fa478efc766149bb74828c0a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_trace_log.html#ad8d3aaf4fa478efc766149bb74828c0a">isEnabled</a> ()</td></tr>
<tr class="separator:ad8d3aaf4fa478efc766149bb74828c0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a5befbb92970f2a34016a21baca3533bb"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_trace_log.html">TraceLog</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_trace_log.html#a5befbb92970f2a34016a21baca3533bb">getInstance</a> ()</td></tr>
<tr class="separator:a5befbb92970f2a34016a21baca3533bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3b6398c28f07d67c04147def30e32c2"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_trace_log.html#af3b6398c28f07d67c04147def30e32c2">registerThread</a> ()</td></tr>
<tr class="separator:af3b6398c28f07d67c04147def30e32c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a898f96a2bc150a3f3a44289fb5ccbcbf"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_trace_log.html#a898f96a2bc150a3f3a44289fb5ccbcbf">deregisterThread</a> ()</td></tr>
<tr class="separator:a898f96a2bc150a3f3a44289fb5ccbcbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a1fb41920d030780919b75ffd5c0f1415"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1fb41920d030780919b75ffd5c0f1415"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>startLogging</b> (BufferMode _buffer_mode, <a class="el" href="trace__buffer_8h.html#a64e765389a7f1bca3cd916bd6615ee48">trace_buffer_factory</a> _buffer_factory, size_t _buffer_size)</td></tr>
<tr class="separator:a1fb41920d030780919b75ffd5c0f1415"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6edf8ec25b030f6af031733938bb3d08"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_trace_log.html#a6edf8ec25b030f6af031733938bb3d08">replaceChunk</a> (<a class="el" href="struct_trace_log_1_1_chunk_tenant.html">ChunkTenant</a> &amp;ct)</td></tr>
<tr class="separator:a6edf8ec25b030f6af031733938bb3d08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6dac02694d53c62b16c7a34471d87f0b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_trace_log.html#a6dac02694d53c62b16c7a34471d87f0b">resetChunk</a> (<a class="el" href="struct_trace_log_1_1_chunk_tenant.html">ChunkTenant</a> &amp;ct)</td></tr>
<tr class="separator:a6dac02694d53c62b16c7a34471d87f0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43f7815e4b04fdddef83924d8aed9bc1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_trace_log.html#a43f7815e4b04fdddef83924d8aed9bc1">stopUNLOCKED</a> ()</td></tr>
<tr class="separator:a43f7815e4b04fdddef83924d8aed9bc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a851a606c966ce557487384e1ed79d6d8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_trace_config.html">TraceConfig</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_trace_log.html#a851a606c966ce557487384e1ed79d6d8">trace_config</a></td></tr>
<tr class="separator:a851a606c966ce557487384e1ed79d6d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af46830a696f3bf25a95eda1913c257eb"><td class="memItemLeft" align="right" valign="top">std::atomic_bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_trace_log.html#af46830a696f3bf25a95eda1913c257eb">enabled</a></td></tr>
<tr class="separator:af46830a696f3bf25a95eda1913c257eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adefa43fa17ade6637f868d30f739253f"><td class="memItemLeft" align="right" valign="top">std::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_trace_log.html#adefa43fa17ade6637f868d30f739253f">mutex</a></td></tr>
<tr class="separator:adefa43fa17ade6637f868d30f739253f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00d81522831c4c8783812a64e8044127"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="class_trace_buffer.html">TraceBuffer</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_trace_log.html#a00d81522831c4c8783812a64e8044127">buffer</a></td></tr>
<tr class="separator:a00d81522831c4c8783812a64e8044127"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74c6e1392c80a8799edf9fbefe98ba77"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_trace_log.html#a74c6e1392c80a8799edf9fbefe98ba77">generation</a> = 0</td></tr>
<tr class="separator:a74c6e1392c80a8799edf9fbefe98ba77"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-static-attribs"></a>
Static Protected Attributes</h2></td></tr>
<tr class="memitem:aac49171840f047d8f756a3faafae09ba"><td class="memItemLeft" align="right" valign="top">static THREAD_LOCAL <a class="el" href="struct_trace_log_1_1_chunk_tenant.html">ChunkTenant</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_trace_log.html#aac49171840f047d8f756a3faafae09ba">thread_chunk</a></td></tr>
<tr class="separator:aac49171840f047d8f756a3faafae09ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab38e86ef9cd424cb5f73ddd4e6bb31ea"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="struct_trace_log_1_1_chunk_tenant.html">ChunkTenant</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_trace_log.html#ab38e86ef9cd424cb5f73ddd4e6bb31ea">shared_chunk</a></td></tr>
<tr class="separator:ab38e86ef9cd424cb5f73ddd4e6bb31ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The <a class="el" href="class_trace_log.html">TraceLog</a> class is the main public management interface of Phosphor. Generally the <a class="el" href="class_trace_log.html">TraceLog</a> is used as a singleton, this instance is acquired via <a class="el" href="class_trace_log.html#a5befbb92970f2a34016a21baca3533bb">TraceLog::getInstance()</a>.</p>
<p>Logging can be enabled by passing in a <a class="el" href="class_trace_config.html">TraceConfig</a> object with the desired options to the TraceConfig::start() method: </p><pre class="fragment">// Enable tracing with a fixed buffer, 5 megabytes in size
TraceLog::getInstance().start(TraceConfig(BufferMode::fixed, 5))
</pre><p>Once enabled, tracing will be logged wherever code has been instrumented with the instrumentation API described in <a class="el" href="phosphor_8h.html">phosphor.h</a>. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a1ad9e9ea9b3b14f6883e004e8b74ced8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TraceLog::TraceLog </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Default constructor for <a class="el" href="class_trace_log.html">TraceLog</a> </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a898f96a2bc150a3f3a44289fb5ccbcbf"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void TraceLog::deregisterThread </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>De-registers the current thread</p>
<p>De-registering will free up any resources associated with the thread. This MUST be called from registered threads before they shutdown to prevent memory-leaks as the only reference to resources they allocate are in thread local storage. </p>

</div>
</div>
<a class="anchor" id="a98d084e49b5d6285368343eeb63bdf1f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt; <a class="el" href="class_trace_buffer.html">TraceBuffer</a> &gt; TraceLog::getBuffer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Transfers ownership of the current <a class="el" href="class_trace_buffer.html">TraceBuffer</a> to the caller</p>
<p>Should only be called while Tracing is disabled. The returned unique_ptr is not guaranteed to be non-null, and in fact <em>will</em> be null if the buffer has previously been retrieved.</p>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="class_trace_buffer.html">TraceBuffer</a> </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::logic_error</td><td>if tracing is currently enabled </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a5befbb92970f2a34016a21baca3533bb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_trace_log.html">TraceLog</a> &amp; TraceLog::getInstance </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Singleton static method to get the <a class="el" href="class_trace_log.html">TraceLog</a> instance</p>
<p>This is technically ThreadSafe according to the C++11 spec but versions of MSVC &lt; 2015 are not <em>quite</em> conforming.</p>
<dl class="section return"><dt>Returns</dt><dd>the <a class="el" href="class_trace_log.html">TraceLog</a> instance </dd></dl>

</div>
</div>
<a class="anchor" id="ad8d3aaf4fa478efc766149bb74828c0a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool TraceLog::isEnabled </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the current state of tracing of this <a class="el" href="class_trace_log.html">TraceLog</a></p>
<dl class="section return"><dt>Returns</dt><dd>True if tracing is enabled, False if tracing is disabled </dd></dl>

</div>
</div>
<a class="anchor" id="a9c1721c7148e479b4595b5a93ad9f930"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T , typename U &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void TraceLog::logEvent </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>category</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_trace_event.html#a28a4149a797aa3e782180b8a400d3a5a">TraceEvent::Type</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">T&#160;</td>
          <td class="paramname"><em>argA</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">U&#160;</td>
          <td class="paramname"><em>argB</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Logs an event in the current buffer (if applicable)</p>
<p>This method should not be used directly, instead the macros contained within <a class="el" href="sentinel_8h.html">sentinel.h</a> should be used instead.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">category</td><td>The category to log the event into. This (and the name) should usually be a string literal as the pointer should remain valid until the buffer is freed. </td></tr>
    <tr><td class="paramname">name</td><td>The name of the event </td></tr>
    <tr><td class="paramname">type</td><td>The type of the event </td></tr>
    <tr><td class="paramname">id</td><td>The id of the event, primarily used for async events </td></tr>
    <tr><td class="paramname">T</td><td>Argument to be saved with the event </td></tr>
    <tr><td class="paramname">U</td><td>Argument to be saved with the event </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="af3b6398c28f07d67c04147def30e32c2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void TraceLog::registerThread </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Registers the current thread for tracing (Optional)</p>
<p>Registering a thread is used for a long-living thread and is used to give it a dedicated <a class="el" href="struct_trace_log_1_1_chunk_tenant.html">ChunkTenant</a> and optionally a name. A registered thread MUST be de-registered before the thread is joined as the act of registering allocates resources only accessibly via thread -local storage.</p>
<p>Registering is desirable as the thread will otherwise share a <a class="el" href="struct_trace_log_1_1_chunk_tenant.html">ChunkTenant</a> with all other non-registered threads. Because this involves acquiring locks that may be under contention this can be expensive. </p>

</div>
</div>
<a class="anchor" id="a6edf8ec25b030f6af031733938bb3d08"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void TraceLog::replaceChunk </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_trace_log_1_1_chunk_tenant.html">ChunkTenant</a> &amp;&#160;</td>
          <td class="paramname"><em>ct</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Replaces the current chunk held by the <a class="el" href="struct_trace_log_1_1_chunk_tenant.html">ChunkTenant</a> with a new chunk (typically because it is full).</p>
<p>This function must be called while the <a class="el" href="struct_trace_log_1_1_chunk_tenant.html">ChunkTenant</a> sentinel is held in the 'Busy' state (via <a class="el" href="class_sentinel.html#ad92e927bfab14379e703970f46ae39ac">Sentinel::acquire</a> or <a class="el" href="class_sentinel.html#aad61625d757f421669e673c76b932980">Sentinel::reopen</a>).</p>
<p>This function internally performs some lock juggling as it requires the global lock and the global lock must not be picked up while holding a <a class="el" href="class_sentinel.html">Sentinel</a> busy lock (Otherwise deadlock may occur). Therefore the sentinel is released, the global lock is picked up and then sentinel is reacquired. The global lock is dropped before the function is returned from.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ct</td><td>The <a class="el" href="struct_trace_log_1_1_chunk_tenant.html">ChunkTenant</a> that should have it's chunk returned and replaced </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a6dac02694d53c62b16c7a34471d87f0b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void TraceLog::resetChunk </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_trace_log_1_1_chunk_tenant.html">ChunkTenant</a> &amp;&#160;</td>
          <td class="paramname"><em>ct</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Resets the current chunk held by the <a class="el" href="struct_trace_log_1_1_chunk_tenant.html">ChunkTenant</a> (because the <a class="el" href="struct_trace_log_1_1_chunk_tenant.html">ChunkTenant</a> has been evicted by the buffer)</p>
<p>This function should be called when the <a class="el" href="struct_trace_log_1_1_chunk_tenant.html">ChunkTenant</a> is found to be closed. This is so that the eviction from the buffer can be acknowledged and the reference to the chunk removed. Once this has been done the chunk can be transitioned back into the Open state. </p>

</div>
</div>
<a class="anchor" id="a4d909b79b5029ebb74ec036311d9ca57"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TraceLog::start </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_trace_config.html">TraceConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>_trace_config</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Start tracing with the specified config</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_trace_config</td><td><a class="el" href="class_trace_config.html">TraceConfig</a> to use for this tracing run </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ae2f61d1156cba274ba9c2f692a5d4487"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TraceLog::stop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Immediately stops tracing </p>

</div>
</div>
<a class="anchor" id="a43f7815e4b04fdddef83924d8aed9bc1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void TraceLog::stopUNLOCKED </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Immediately stops tracing while the global lock is held. </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a00d81522831c4c8783812a64e8044127"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;<a class="el" href="class_trace_buffer.html">TraceBuffer</a>&gt; TraceLog::buffer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>buffer is the current buffer that is being used by the <a class="el" href="class_trace_log.html">TraceLog</a>.</p>
<p>While logging is enabled the buffer will have various chunks of the buffer loaned out </p>

</div>
</div>
<a class="anchor" id="af46830a696f3bf25a95eda1913c257eb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic_bool TraceLog::enabled</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Whether or not tracing is currently enabled </p>

</div>
</div>
<a class="anchor" id="a74c6e1392c80a8799edf9fbefe98ba77"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t TraceLog::generation = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The current tracing generation. This is incremented every-time tracing is stopped and is passed into the <a class="el" href="class_trace_buffer.html">TraceBuffer</a> when it is constructed in order to 'uniquely' identify it. </p>

</div>
</div>
<a class="anchor" id="adefa43fa17ade6637f868d30f739253f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::mutex TraceLog::mutex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>mutex is the 'global' lock for the <a class="el" href="class_trace_log.html">TraceLog</a> and should be acquired when modifying the <a class="el" href="class_trace_log.html">TraceLog</a> itself or the current <a class="el" href="class_trace_buffer.html">TraceBuffer</a>.</p>
<p>It is not required to be acquired when modifying a loaned out <a class="el" href="class_trace_buffer_chunk.html">TraceBufferChunk</a> contained within a <a class="el" href="struct_trace_log_1_1_chunk_tenant.html">ChunkTenant</a>, this is protected by the <a class="el" href="struct_trace_log_1_1_chunk_tenant.html">ChunkTenant</a>'s sentinel lock instead. </p>

</div>
</div>
<a class="anchor" id="ab38e86ef9cd424cb5f73ddd4e6bb31ea"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_trace_log_1_1_chunk_tenant.html">TraceLog::ChunkTenant</a> TraceLog::shared_chunk</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The shared <a class="el" href="struct_trace_log_1_1_chunk_tenant.html">ChunkTenant</a> which is used be default when a thread has not been registered.</p>
<p>This is because we need to guarantee that the resources in the thread-specific chunk will be at some point freed up. </p>

</div>
</div>
<a class="anchor" id="aac49171840f047d8f756a3faafae09ba"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">THREAD_LOCAL <a class="el" href="struct_trace_log_1_1_chunk_tenant.html">TraceLog::ChunkTenant</a> TraceLog::thread_chunk</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The thread-specific <a class="el" href="struct_trace_log_1_1_chunk_tenant.html">ChunkTenant</a> used for low contention </p>

</div>
</div>
<a class="anchor" id="a851a606c966ce557487384e1ed79d6d8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_trace_config.html">TraceConfig</a> TraceLog::trace_config</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The current or last-used <a class="el" href="class_trace_config.html">TraceConfig</a> of the <a class="el" href="class_trace_log.html">TraceLog</a> </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/phosphor/<a class="el" href="trace__log_8h_source.html">trace_log.h</a></li>
<li>src/trace_log.cc</li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="class_trace_log.html">TraceLog</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
